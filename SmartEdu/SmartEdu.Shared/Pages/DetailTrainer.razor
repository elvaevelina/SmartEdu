@page "/trainerdetail/{IdTrainer:int}"
@using System.Net.Http.Json
@using SmartEdu.Shared.Models
@inject NavigationManager Nav
@inject HttpClient Http

<div class="hero-section">
    <h1 class="system-title">SmartEdu</h1>
    <p class="system-subtitle">Hybrid Learning Management System for Modern Education</p>
</div>
<h2 class="trainer-detail-title">Trainer Detail</h2>

@if (Trainer == null)
{
    <p class="loading-text">Loading trainer details...</p>
}
else
{
    <div class="trainer-detail-container">
        <div class="trainer-card-detail">
            <div class="trainer-avatar-detail">👨‍🏫</div>
            <div class="trainer-info-detail">
                <h3>@Trainer.Name</h3>
                <p><strong>ID:</strong> @Trainer.IdTrainer</p>
                <p><strong>Email:</strong> @Trainer.Email</p>
                <p><strong>Phone:</strong> @Trainer.Phone</p>
                <p><strong>Address:</strong> @Trainer.Address</p>
            </div>
        </div>

        <div class="trainer-courses-section">
            <h3>Courses Taught</h3>

            @if (Trainer.Courses == null || !Trainer.Courses.Any())
            {
                <p class="no-courses">This trainer has no assigned courses.</p>
            }
            else
            {
                <ul class="course-list">
                    @foreach (var course in Trainer.Courses)
                    {
                        <li class="course-item">
                            <div class="course-icon">📘</div>
                            <div class="course-info">
                                <h4>@course.Title</h4>
                                <p>@course.Description</p>
                                <span class="duration">@course.DurationInHours Hours</span>
                            </div>
                        </li>
                    }
                </ul>
            }
        </div>

        <button class="back-btn" @onclick="GoBack">← Back</button>
    </div>
}

@code {
    [Parameter] public int IdTrainer { get; set; }
    private Trainer? Trainer;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            Trainer = await Http.GetFromJsonAsync<Trainer>($"https://localhost:7194/api/trainers/{IdTrainer}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching trainer details: {ex.Message}");
        }
    }

    private void GoBack()
    {
        Nav.NavigateTo("/");
    }
}