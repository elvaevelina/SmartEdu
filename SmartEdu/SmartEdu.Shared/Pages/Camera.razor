@page "/camera"
@using SmartEdu.Shared.Services
@inject ICameraService CameraService
@inject NavigationManager Nav

<div class="container" style="text-align:center; margin-top:20px;">
    <h3 style="color: #00334E;">Fitur Kamera</h3>
    <p>Ambil foto dokumentasi atau bukti kegiatan.</p>

    <div class="image-preview" style="margin: 20px auto; width: 100%; max-width: 400px; min-height: 200px; background-color: #f0f0f0; border-radius: 10px; display: flex; align-items: center; justify-content: center; border: 2px dashed #ccc;">
        @if (!string.IsNullOrEmpty(capturedImagePath))
        {
            <img src="@capturedImagePath" style="width: 100%; height: auto; border-radius: 10px;" />
        }
        else
        {
            <span style="color: #999;">The photo results will appear here</span>
        }
    </div>

    <div class="action-buttons" style="display: flex; gap: 10px; justify-content: center;">
        <button class="btn btn-primary btn-lg" @onclick="TakePhoto">
            📸 Take a Picture
        </button>

        <button class="btn btn-secondary btn-lg" @onclick="PickPhoto">
            🖼️ Get From Gallery
        </button>
    </div>

    <br />

    <button class="btn btn-link" @onclick="BackToHome">
        ← Back to Home
    </button>
</div>

@code {
    private string? capturedImagePath;

    // Fungsi membuka kamera
    private async Task TakePhoto()
    {
        var result = await CameraService.TakePhotoAsync();
        if (result != null)
        {
            capturedImagePath = result; // Tampilkan gambar
        }
    }

    // Fungsi membuka galeri
    private async Task PickPhoto()
    {
        var result = await CameraService.PickPhotoAsync();
        if (result != null)
        {
            capturedImagePath = result; // Tampilkan gambar
        }
    }

    private void BackToHome()
    {
        Nav.NavigateTo("/");
    }
}